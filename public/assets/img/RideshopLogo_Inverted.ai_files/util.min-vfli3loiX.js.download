define(["require","exports","tslib","react","modules/clean/api_v2/default_user_client","modules/clean/growth/user_action/trackers/workflows_painted_door_tracker","modules/clean/teams/post_action_painted_door_modal/constants","modules/clean/react/modal","modules/clean/viewer","modules/core/exception"],(function(e,t,r,o,n,a,i,s,c,u){"use strict";function _(){return r.__awaiter(this,void 0,Promise,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,new n.DefaultUserApiV2Client(c.Viewer.get_viewer().work_user).ns("growth").rpc("performed_user_action",{project:a.WorkflowsPaintedDoorProjectTag,action:a.WorkflowsPaintedDoorActions.HAS_SEEN_PAINTED_DOOR_MODAL},{})];case 1:return[2,e.sent().has_performed]}}))}))}function l(e,t){return r.__awaiter(this,void 0,Promise,(function(){var o,n;return r.__generator(this,(function(r){switch(r.label){case 0:return o=["V1","V2","V3"].includes(t)&&e===i.ActionSource.INVITE||"V4"===t&&e===i.ActionSource.SHARE_FOLDER||["V5","V6"].includes(t)&&e===i.ActionSource.SHARE_FILE_OR_FOLDER,[4,_()];case 1:return n=r.sent(),[2,o&&!n]}}))}))}function d(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,new a.WorkflowsPaintedDoorTracker(c.Viewer.get_viewer().work_user.id).track(a.WorkflowsPaintedDoorActions.HAS_SEEN_PAINTED_DOOR_MODAL)];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),u.reportStack("Error tracking modal seen: "+e,{severity:u.SEVERITY.NONCRITICAL,tags:[a.WorkflowsPaintedDoorProjectTag]}),[3,3];case 3:return[2]}}))}))}Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),t.checkHasSeenModal=_,t.openModal=function(t,n){return r.__awaiter(this,void 0,void 0,(function(){var a;return r.__generator(this,(function(c){switch(c.label){case 0:return i.allowedVariants.includes(n)?[4,l(t,n)]:[2];case 1:return c.sent()?[4,new Promise((function(t,r){e(["modules/clean/teams/post_action_painted_door_modal/post_action_painted_door_modal"],t,r)})).then(r.__importStar)]:[3,3];case 2:a=c.sent().PostActionPaintedDoorModal,s.Modal.showInstance(o.default.createElement(a,{actionSource:t,variant:n})),d(),c.label=3;case 3:return[2]}}))}))},t.shouldShowModal=l,t.trackSeenModal=d}));
//# sourceMappingURL=util.min.js-vflwzjJPq.map