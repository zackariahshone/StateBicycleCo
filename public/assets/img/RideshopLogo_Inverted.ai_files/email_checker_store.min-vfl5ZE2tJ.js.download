define(["require","exports","tslib","modules/clean/ajax"],(function(e,i,t,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),n=t.__importStar(n);var c=(function(){function e(){this.inFlight=!0,this.canInvite=!1,this.reason="checking",this.callbacks=[]}return e.prototype.whenReady=function(e){this.inFlight?this.callbacks.push(e):e()},e.prototype.resultArrived=function(e,i){if(this.inFlight){this.inFlight=!1,this.canInvite=e,this.reason=i;for(var t=0,n=this.callbacks;t<n.length;t++){(0,n[t])()}this.callbacks=[]}},e})(),r=function(e){var i=this;this.checkEmails=function(e,t){var r={},s=e.length;if(0===s)return t(r);for(var a=[],h=function(e){var n=i.checkedEmails[e];n||(n=i.checkedEmails[e]=new c,a.push(e)),n.whenReady((function(){r[e]=n,0==--s&&t(r)}))},l=0,o=e;l<o.length;l++)h(o[l]);(function(e){n.WebRequest({url:i.checkUrl,data:{emails:e.join(",")},success:function(e){var t=JSON.parse(e);for(var n in t)if(t[n]){var c=t[n],r=c.can_invite,s=c.reason;i.checkedEmails[n]&&i.checkedEmails[n].resultArrived(r,s)}},error:function(){for(var t=0,n=e;t<n.length;t++){var c=n[t];delete i.checkedEmails[c]}}})})(a)},this.getEmailCheckResult=function(e){return i.checkedEmails[e]},this.checkUrl=e,this.checkedEmails={}};i.EmailCheckerStore=r}));
//# sourceMappingURL=email_checker_store.min.js-vfl8mUUij.map