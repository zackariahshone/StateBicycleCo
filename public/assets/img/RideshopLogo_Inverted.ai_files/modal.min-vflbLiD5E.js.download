define(["require","exports","tslib","react","modules/clean/analytics","modules/clean/em_string","modules/clean/filepath","modules/clean/react/copy_to_dropbox/actions","modules/clean/react/modal","modules/clean/share_download/types","modules/clean/share_download/utils","modules/clean/viewer","modules/core/i18n","modules/core/notify","modules/clean/loggers/folder_preview_logger","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/logging"],(function(e,t,o,a,n,s,r,l,i,d,m,u,c,p,f,g,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o.__importDefault(a),r=o.__importStar(r);var y=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleAccept=function(){var e=b(t.props.role);p.Notify.success(e),l.copySharedFile(t.props.shareToken,t.props.userId),t.props.folderPreviewSession?f.logEvent(g.UserAction.SaveToDropboxApprove,t.props.folderPreviewSession):_.logUserAction(g.UserAction.SaveToDropboxApprove,g.UserActionContext.Unknown)},t.handleDismiss=function(e){t.props.onDismiss&&t.props.onDismiss(e),t.props.folderPreviewSession?f.logEvent(g.UserAction.SaveToDropboxCancel,t.props.folderPreviewSession):_.logUserAction(g.UserAction.SaveToDropboxCancel,g.UserActionContext.Unknown)},t}return o.__extends(t,e),t.prototype.componentDidMount=function(){n.WebMiscActivityLogger.log("show-c2d-modal")},t.prototype.render=function(){var e=this.props,t=e.copyable,o=e.role,n=m.getCopyableName(t),l=m.getCopyableType(t);return a.default.createElement(i.Modal,{title:v(n,o),acceptButtonText:c.intl.formatMessage({id:"78AHo5",defaultMessage:"Save"}),dismissButtonText:c.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),onAccept:this.handleAccept,onDismiss:this.handleDismiss,style:"default-maestro"},a.default.createElement("p",{className:"db-modal-message"},(function(e,t,o){var n=u.Viewer.get_viewer(),l=n.get_user_by_role(t);if(e=s.Emstring.em_snippet(e,15),l&&l.is_cdm_member)return c.intl.formatMessage({id:"3Sb6Ws",defaultMessage:"<strong>{name}</strong> will be saved to the <strong>{cdm_tmf_name}</strong> folder in your {team_name} Dropbox account."},{name:e,cdm_tmf_name:r.filename(l.cdm_tmf_path),team_name:n.team_name,strong:function(e){return a.default.createElement("strong",null,e)}});if(n.is_paired)switch(t){case"personal":return c.intl.formatMessage({id:"nBgj3Q",defaultMessage:"<strong>{name}</strong> will be saved to your personal Dropbox account and synced to any connected devices."},{name:e,strong:function(e){return a.default.createElement("strong",null,e)}});case"work":switch(o){case d.CopyableType.Collection:return c.intl.formatMessage({id:"2yp43H",defaultMessage:"This album will be instantly saved to your {team_name} Dropbox and downloaded to all the computers linked to your {team_name} account."},{team_name:n.team_name});case d.CopyableType.Folder:return c.intl.formatMessage({id:"eJs/IE",defaultMessage:"This folder will be instantly saved to your {team_name} Dropbox and downloaded to all the computers linked to your {team_name} account."},{team_name:n.team_name});default:return c.intl.formatMessage({id:"Kb1en/",defaultMessage:"This file will be instantly saved to your {team_name} Dropbox and downloaded to all the computers linked to your {team_name} account."},{team_name:n.team_name})}}switch(o){case d.CopyableType.Collection:return c.intl.formatMessage({id:"35MZFn",defaultMessage:"This album will be instantly saved to your Dropbox and downloaded to all the computers linked to your account."});case d.CopyableType.Folder:return c.intl.formatMessage({id:"qkudum",defaultMessage:"This folder will be instantly saved to your Dropbox and downloaded to all the computers linked to your account."});default:return c.intl.formatMessage({id:"uGDUlE",defaultMessage:"This file will be instantly saved to your Dropbox and downloaded to all the computers linked to your account."})}})(n,o,l)))},t})(a.default.Component);function b(e){var t=u.Viewer.get_viewer();if(t.is_paired)switch(e){case"personal":return c.intl.formatMessage({id:"9Q/1TS",defaultMessage:"Saving to your personal Dropbox..."});case"work":return c.intl.formatMessage({id:"5wQTp4",defaultMessage:"Saving to your {team_name} Dropbox..."},{team_name:t.team_name})}return c.intl.formatMessage({id:"vFhcfF",defaultMessage:"Saving to your Dropbox..."})}function v(e,t){var o=u.Viewer.get_viewer(),a=o.get_user_by_role(t);if(a&&a.is_cdm_member)return c.intl.formatMessage({id:"yHgTUN",defaultMessage:"Save to your member folder?"});if(o.is_paired)switch(t){case"personal":return c.intl.formatMessage({id:"fI7sAv",defaultMessage:"Save to your personal Dropbox account?"});case"work":var n=o.team_name,r=new s.Emstring(n||"").length,l=Math.max(10,15-r);return c.intl.formatMessage({id:"5SXeZ6",defaultMessage:"Save ‘{name}’ to my {team_name} Dropbox"},{name:s.Emstring.em_snippet(e,l),team_name:n})}return c.intl.formatMessage({id:"ktpG9L",defaultMessage:"Save ‘{name}’ to my Dropbox"},{name:s.Emstring.em_snippet(e,15)})}t.CopyToDropboxModal=y}));
//# sourceMappingURL=modal.min.js-vflViXB4S.map